{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["// export default function fetchImages(searchQuery) {\n//   const URL_NAME = 'https://pixabay.com/api/';\n//   const KEY = '42469409-3f592d4c2a8b117d2f80b97d4';\n//   const LINK = `${URL_NAME}?key=${KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n//   return fetch(LINK).then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.status);\n//     }\n//     return response.json();\n//   });\n// }\nimport axios from 'axios';\n\nexport default async function fetchImages(searchQuery, amountPage, perPage) {\n  const KEY = '42469409-3f592d4c2a8b117d2f80b97d4';\n  // формуємо параметри запиту\n  const params = new URLSearchParams({\n    key: KEY,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: amountPage,\n    per_page: perPage,\n  });\n\n  // отримаємо результат запиту\n  const response = await axios.get(`https://pixabay.com/api/?${params}`);\n\n  // повертаємо данні запиту\n  return response.data;\n}\n","export default function createCard(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n                </a>\n                <div class=\"gallery-sign\">\n                    <div>\n                        <h2 class=\"gallery-title\">Likes</h2>\n                        <p class=\"gallery-text\">${likes}</p>\n                    </div>\n                    <div>\n                        <h2 class=\"gallery-title\">Views</h2>\n                        <p class=\"gallery-text\">${views}</p>\n                    </div>\n                    <div>\n                        <h2 class=\"gallery-title\">Comments</h2>\n                        <p class=\"gallery-text\">${comments}</p>\n                    </div>\n                    <div>\n                        <h2 class=\"gallery-title\">Downloads</h2>\n                        <p class=\"gallery-text\">${downloads}</p>\n                    </div>\n                 </div>   \n                </li>`;\n      }\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport fetchImages from './js/pixabay-api';\nimport createCard from './js/render-function';\nimport axios from 'axios';\n\nconst searchForm = document.querySelector('form');\nconst loadBtn = document.querySelector('.load-btn');\nconst spinner = document.querySelector('span');\nconst galleryContainer = document.querySelector('.gallery');\nconst optionsLightBox = {\n  captionsData: 'alt',\n  captionDelay: 250,\n};\nconst optionsIziToastSearch = {\n  message:\n    'Sorry, there are no images matching your search query. Please try again!',\n  messageColor: '',\n  messageSize: '25',\n  backgroundColor: '#EF4040',\n  balloon: true,\n  theme: 'light',\n  close: true,\n  closeOnEscape: true,\n  closeOnClick: true,\n  overlay: true,\n  overlayClose: true,\n};\nconst optionsIziToastLoadMore = {\n  message: \"We're sorry, but you've reached the end of search results.\",\n  messageColor: '',\n  messageSize: '25',\n  backgroundColor: '#EF4040',\n  balloon: true,\n  theme: 'light',\n  position: 'topRight',\n  close: true,\n  closeOnEscape: true,\n  closeOnClick: true,\n  overlay: true,\n  overlayClose: true,\n  overlayColor: 'rgba(0, 0, 0, 0.3)',\n  transitionIn: 'fadeInUp',\n};\nconst lightBox = new SimpleLightbox('.gallery a', optionsLightBox);\n\nconst perPage = 15;\nconst i = 2;\nlet amountPage = 1;\nlet searchQuery = '';\n\nsearchForm.addEventListener('submit', onSubmitBtn);\nloadBtn.addEventListener('click', onClickLoadBtn);\n\nhideLoadBtn();\n\nasync function onSubmitBtn(e) {\n  e.preventDefault();\n\n  // очищаємо контейнер перед новим запитом\n  resetPage();\n  // отримуємо значення з інпут\n  const searchQuery = e.currentTarget.elements.query.value.trim();\n\n  if (searchQuery) {\n    // addLoader();\n    try {\n      // отримуємо об'єкт з картинками\n      const images = await fetchImages(searchQuery, amountPage, perPage);\n\n      if (images.total === 0) {\n        resetForm();\n        hideLoadBtn();\n        // deleteLoader();\n        return iziToast.error(optionsIziToastSearch);\n      } else if (images.totalHits < perPage) {\n        addCardMarkup(images.hits);\n        hideLoadBtn();\n        // deleteLoader();\n      } else {\n        // рендеремо картки\n        addCardMarkup(images.hits);\n        visibleLoadBtn();\n        // deleteLoader();\n\n        return searchQuery;\n      }\n    } catch (error) {\n      hideLoadBtn();\n      // deleteLoader();\n      iziToast.error(optionsIziToastSearch);\n    }\n  }\n  resetForm();\n}\n\nasync function onClickLoadBtn() {\n  addLoader();\n  try {\n    amountPage += 1;\n    const images = await fetchImages(searchQuery, amountPage, perPage);\n    const totalPage = Math.ceil(images.totalHits / perPage);\n\n    if (amountPage > totalPage) {\n      return iziToast.error(optionsIziToastLoadMore);\n    }\n    addCardMarkup(images.hits);\n\n    // робимо прокрутку екрана пр натисканні кнопки\n    const cardElement = document.querySelector('.gallery-image');\n    // отримуємо за допомогою метода об'єкт з властивостями елемента та вибираємо висоту\n    const heightCard = cardElement.getBoundingClientRect().height;\n    const heightScroll = i * heightCard;\n    window.scrollBy(0, heightScroll);\n  } catch (error) {\n    deleteLoader();\n    iziToast.error(optionsIziToastLoadMore);\n  }\n}\n\nfunction addCardMarkup(images) {\n  galleryContainer.insertAdjacentHTML('beforeend', createCard(images));\n  deleteLoader();\n  lightBox.refresh();\n}\n\nfunction resetForm() {\n  searchForm.reset();\n}\n\nfunction resetPage() {\n  galleryContainer.innerHTML = '';\n}\n\nfunction hideLoadBtn() {\n  loadBtn.classList.add('is-hidden');\n}\n\nfunction visibleLoadBtn() {\n  loadBtn.classList.remove('is-hidden');\n}\n\nfunction addLoader() {\n  spinner.classList.add('loader');\n}\n\nfunction deleteLoader() {\n  spinner.classList.remove('loader');\n}\n"],"names":["fetchImages","searchQuery","amountPage","perPage","KEY","params","axios","createCard","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","loadBtn","spinner","galleryContainer","optionsLightBox","optionsIziToastSearch","optionsIziToastLoadMore","lightBox","SimpleLightbox","i","onSubmitBtn","onClickLoadBtn","hideLoadBtn","e","resetPage","resetForm","iziToast","addCardMarkup","visibleLoadBtn","addLoader","totalPage","heightCard","heightScroll","deleteLoader"],"mappings":"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"}